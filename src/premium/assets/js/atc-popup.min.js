"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var o,e=1,n=arguments.length;e<n;e++)for(var a in o=arguments[e])Object.prototype.hasOwnProperty.call(o,a)&&(t[a]=o[a]);return t}).apply(this,arguments)};function initJqueryRetainfulPopupJs(){jQuery(function(t){var o=function(){function o(){this.add_to_cart_popup_options={}}return o.prototype.isLocalStorageSupports=function(){try{return sessionStorage.setItem("retainful","test"),sessionStorage.removeItem("retainful"),localStorage.setItem("retainful","test"),localStorage.removeItem("retainful"),!0}catch(t){return!1}},o.prototype.setOptions=function(t){void 0===t&&(t={});return this.add_to_cart_popup_default_options=__assign(__assign({},{enable_add_to_cart_popup:"no",is_email_mandatory:"yes",no_thanks_action:"1",close_btn_behavior:"just_close",show_popup_until:"1",add_to_cart_popup_base_id:"#rnoc-add-to-cart-add-on"}),t),this},o.prototype.getOptions=function(){return this.add_to_cart_popup_default_options},o.prototype.displayPopup=function(o){t(document).trigger("retainful_showing_add_to_cart_popup",[o]),o.removeClass("loading"),o.addClass("rnoc-popup-opener");var e=this.getAddToCartPopupWindow();e.css("display","block"),sessionStorage.setItem("retainful_add_to_cart_opened","yes"),t(document).trigger("retainful_showed_add_to_cart_popup",[e,o])},o.prototype.closePopup=function(o){if(void 0===o&&(o="1"),this.isLocalStorageSupports()){sessionStorage.setItem("retainful_add_to_cart_popup_closed_by",o);var e=this.getAddToCartPopupWindow();t(document).trigger("retainful_closing_add_to_cart_popup",[e]);var n=t(".rnoc-popup-opener");"1"===o||"2"===o?(sessionStorage.setItem("retainful_add_to_cart_popup_temporary_silent","1"),n.click()):"just_close"!==this.getCloseButtonBehaviour()&&(sessionStorage.setItem("retainful_add_to_cart_popup_temporary_silent","1"),n.click()),n.attr("disabled",!1),n.removeClass("rnoc-popup-opener"),e.css("display","none"),t(document).trigger("retainful_closed_add_to_cart_popup",[e])}},o.prototype.getAddToCartPopupWindow=function(){var o=this.getOptions();return t(o.add_to_cart_popup_base_id)},o.prototype.getCloseButtonBehaviour=function(){return this.getOptions().close_btn_behavior},o.prototype.isPopupEnabled=function(){return"yes"===this.getOptions().enable_add_to_cart_popup},o.prototype.noConflictMode=function(){return"yes"===this.getOptions().no_conflict_mode},o.prototype.isEmail=function(t){return/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(t)},o.prototype.needPopup=function(){var t=this.getOptions();if(this.isLocalStorageSupports()&&this.isPopupEnabled()){if("1"===sessionStorage.getItem("retainful_add_to_cart_popup_temporary_silent"))return sessionStorage.removeItem("retainful_add_to_cart_popup_temporary_silent"),!1;var o=sessionStorage.getItem("retainful_add_to_cart_popup_closed_by");if("1"===o)return!1;if(null===o)return!0;var e=!0;switch(t.show_popup_until){default:case"1":e="1"!==o;break;case"2":e="2"!==o;break;case"3":e="3"!==o}return e}return!1},o.prototype.request=function(o,e,n,a,r,i){void 0===e&&(e={}),void 0===n&&(n={}),void 0===a&&(a="json"),void 0===r&&(r="POST"),void 0===i&&(i=!1);var p=null;return t.ajax({url:o,headers:n,method:r,dataType:a,data:e,async:i,success:function(t){p=t},error:function(t){p=t}}),p},o.prototype.syncEmail=function(t,o,e,n,a){if(n.preventDefault(),a.hide(),"yes"===this.getOptions().is_email_mandatory&&""===t)return a.show(),{error:!0};if(this.isEmail(t)){e.addClass("loading"),e.attr("disabled",!0);var r={local_storage:!0,email:t,is_buyer_accepting_marketing:o.is(":checked")?1:0,action:"set_rnoc_guest_session"};localStorage.setItem("rnoc_atcp_data",t);var i=this.request(rnoc_ajax_url,r);return i.error?i.message:(i.message,null!==i.redirect&&(sessionStorage.setItem("rnoc_instant_coupon_popup_redirect",i.redirect),sessionStorage.setItem("rnoc_instant_coupon_is_redirected","no")),i.show_coupon_instant_popup&&(sessionStorage.setItem("rnoc_instant_coupon_popup_showed","no"),sessionStorage.setItem("rnoc_instant_coupon_popup_html",i.coupon_instant_popup_content)),sessionStorage.setItem("rnocp_is_add_to_cart_popup_email_entered","1"),this.closePopup("1")),e.removeClass("loading"),e.attr("disabled",!1),{error:!1}}return a.show(),{error:!0}},o}(),e={enable_add_to_cart_popup:"no"},n={};n="undefined"==typeof retainful_premium_add_to_cart_collection_popup_condition?__assign(__assign({},e),{}):__assign(__assign({},e),retainful_premium_add_to_cart_collection_popup_condition);var a=(new o).setOptions(n);if(t(document).on("adding_to_cart",function(t,o,e){if(a.needPopup()){if(a.displayPopup(o),a.noConflictMode())throw new Error("Retainful intercepts to show popup!")}else{var n=localStorage.getItem("rnoc_atcp_data");null!=n&&""!==n&&(e.rnoc_email_popup=n,localStorage.removeItem("rnoc_atcp_data"))}}),t(document).on("click","#rnoc-add-to-cart-add-on .close-rnoc-popup",function(t){t.preventDefault(),a.closePopup("3")}),t(document).on("click","#rnoc-add-to-cart-add-on .no-thanks-close-popup",function(t){t.preventDefault(),a.closePopup("2")}),t(document).on("click","#rnoc-add-to-cart-add-on .rnoc-popup-btn",function(o){var e=t("#rnoc-add-to-cart-add-on #rnoc-popup-email-field").val(),n=t("#rnoc-add-to-cart-add-on  #rnoc-invalid-mail-message"),r=t("#rnoc-add-to-cart-add-on #rnoc-popup-buyer-accepts-marketing");a.syncEmail(e,r,t("#rnoc-add-to-cart-add-on .rnoc-popup-btn"),o,n)}),t(document).on("click",".single_add_to_cart_button,[name=add-to-cart]",function(o){if(a.needPopup())o.preventDefault(),a.displayPopup(t(this));else{var e=localStorage.getItem("rnoc_atcp_data");if(null!=e&&""!==e){var n='<input type="hidden" name="rnoc_email_popup" value="'+e+'" />';t(this).after(n),localStorage.removeItem("rnoc_atcp_data")}}}),"undefined"!=typeof retainful_premium_add_to_cart_collection&&void 0!==retainful_premium_add_to_cart_collection.add_to_cart_button_classes){var r=retainful_premium_add_to_cart_collection.add_to_cart_button_classes;t(document).on("click",r,function(o){var e=t(this),n=e.attr("href"),r=e.attr("name");void 0!==n&&a.needPopup()&&-1!==n.indexOf("add-to-cart")?(o.preventDefault(),a.displayPopup(e)):void 0!==r&&"add-to-cart"===r&&(o.preventDefault(),a.displayPopup(e))})}var i=new(function(){function o(){}return o.prototype.isLocalStorageSupports=function(){try{return sessionStorage.setItem("retainful","test"),sessionStorage.removeItem("retainful"),localStorage.setItem("retainful","test"),localStorage.removeItem("retainful"),!0}catch(t){return!1}},o.prototype.showInstantPopup=function(){if(this.isLocalStorageSupports()){var o=sessionStorage.getItem("rnoc_instant_coupon_is_redirected");if(o&&"no"===o){var e=sessionStorage.getItem("rnoc_instant_coupon_popup_redirect");sessionStorage.setItem("rnoc_instant_coupon_is_redirected","yes"),window.location.href=e}var n=sessionStorage.getItem("rnoc_instant_coupon_popup_showed");if(n&&"no"===n){var a=sessionStorage.getItem("rnoc_instant_coupon_popup_html");t(a).appendTo("body"),this.getInstantPopup().show(),sessionStorage.setItem("rnoc_instant_coupon_popup_showed","yes")}}},o.prototype.closeInstantPopup=function(){this.getInstantPopup().hide()},o.prototype.getInstantPopup=function(){return t("#rnoc-add-to-cart-add-on-instant-coupon").show()},o}());t(document).on("added_to_cart",function(t,o,e){i.showInstantPopup()}),t(document).ready(function(){i.showInstantPopup()}),t(document).on("click","#rnoc-add-to-cart-add-on-instant-coupon .close-rnoc-popup",function(){i.closeInstantPopup()})})}document.addEventListener("DOMContentLoaded",function(){if("undefined"==typeof jQuery){void 0!==retainful_premium_add_to_cart_collection_popup_condition.jquery_url&&function(t,o){var e=document.createElement("script");e.src=t;var n=document.getElementsByTagName("head")[0],a=!1;e.onload=e.onreadystatechange=function(){a||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(a=!0,o(),e.onload=e.onreadystatechange=null,n.removeChild(e))},n.appendChild(e)}(retainful_premium_add_to_cart_collection_popup_condition.jquery_url,function(){"undefined"==typeof jQuery||(jQuery.noConflict(),initJqueryRetainfulPopupJs())})}else initJqueryRetainfulPopupJs()});